<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="kr.ac.ju.dao.DocDao">

	<!-- 직원 로그인 기안서, 휴가계획서, 퇴직서 정보 조회  -->
	<select id="getDocEmployeeByNo" parameterType="int" resultType="hashmap">
		SELECT 
			A.DOC_NO, B.DRAFT_TITLE, A.DOC_FILE_YN, C.EMPLOYEE_NAME, D.PROFESSOR_NAME, A.DOC_CREATE_DATE, A.DOC_STATE
		FROM 
			DOCS A, DRAFTS B, EMPLOYEES C, PROFESSORS D
		WHERE 
			A.DOC_NO = B.DOCS_NO
		AND 
			A.EMPLOYEE_NO = C.EMPLOYEE_NO
		AND 
			A.DOC_FINAL_PERSON = D.PROFESSOR_NO
		AND 
			A.EMPLOYEE_NO = #{value}
		UNION
		SELECT 
			A.DOC_NO, '휴가신청서', A.DOC_FILE_YN, C.EMPLOYEE_NAME, D.PROFESSOR_NAME,  A.DOC_CREATE_DATE, A.DOC_STATE
		FROM 
			DOCS A, EMPLOYEES C, PROFESSORS D
		WHERE 
			A.EMPLOYEE_NO = C.EMPLOYEE_NO
		AND 
			A.DOC_FINAL_PERSON = D.PROFESSOR_NO
		AND 
			A.EMPLOYEE_NO = #{value}
		UNION
		SELECT 
			A.DOC_NO, '퇴직신청서', A.DOC_FILE_YN, B.EMPLOYEE_NAME, C.PROFESSOR_NAME, A.DOC_CREATE_DATE, A.DOC_STATE 
		FROM 
			DOCS A, EMPLOYEES B, PROFESSORS C
		WHERE 
			A.EMPLOYEE_NO = B.EMPLOYEE_NO
		AND 
			A.DOC_FINAL_PERSON = C.PROFESSOR_NO
		AND 
			A.EMPLOYEE_NO = #{value}
	</select>
	 
	<!-- 직원 기안서(보고서), 휴가계획서, 퇴직서 등록 -->
	
</mapper>